<div class="sheet-2colrow">
    <div class="sheet-col">
        <div class="SPEW-AI">
            <span class="sheet-label title">S.P.E.W. Attributes</span>
            <div class="attr-container">
                <div class="attributes-container">
                    <span class="sheet-label attr-label">STRENGTH</span>
                    <input type="text" class="sheet-attr" name="attr_strength" maxlength="2">
                    <input type="hidden" name="attr_strength_b">
                </div>
                <div class="attributes-container">
                    <span class="sheet-label attr-label">PERCEPTION</span>
                    <input type="text" class="sheet-attr" name="attr_perception" maxlength="2">
                    <input type="hidden" name="attr_perception_b">
                </div>
                <div class="attributes-container">
                    <span class="sheet-label attr-label">EMPATHY</span>
                    <input type="text" class="sheet-attr" name="attr_empathy" maxlength="2">
                    <input type="hidden" name="attr_empathy_b">
                </div>
                <div class="attributes-container">
                    <span class="sheet-label attr-label">WILLPOWER</span>
                    <input type="text" class="sheet-attr" name="attr_willpower" maxlength="2">
                    <input type="hidden" name="attr_perception_b">
                </div>
            </div>
        </div>
        <div class="skills-container">
            <span class="sheet-label title">SKILLS</span>
            <div class="basic-skills-container">
                <span class="sheet-label subtitle">BASIC SKILL CHECKS</span>
                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <div class="skill-box">
                            <button class="btn ui-draggable" type="roll" name="roll_balance" value="&{template:ou} {{name=@{character_name}}} {{roll_name=Balance}} {{result=[[floor((abs(1d100cs<[[@{perception} + @{willpower_b}]]cf>[[@{perception} + @{willpower_b}+1]]-[[@{perception} + @{willpower_b}]]))/10)]]}}" datai18n="balance-u">BALANCE<span>(Bal%)</span></span></button>
                        </div>
                        <div class="skill-box">
                            <button class="btn ui-draggable" type="roll" name="roll_climb" value="&{template:ou} {{name=@{character_name}}} {{roll_name=Climb}} {{result=[[floor((abs(1d100cs<[[@{strength} + @{willpower_b}]]cf>[[@{strength} + @{willpower_b}+1]]-[[@{strength} + @{willpower_b}]]))/10)]]}}" datai18n="climb-u">CLIMB<span>(Clim%)</span></button>
                        </div>
                    <div class="skill-box">
                            <button class="btn ui-draggable" type="roll" name="roll_composure" value="&{template:ou} {{name=@{character_name}}} {{roll_name=Composure}} {{result=[[floor((abs(1d100cs<[[@{willpower} + @{empathy_b}]]cf>[[@{willpower} + @{empathy_b}+1]]-[[@{willpower} + @{empathy_b}]]))/10)]]}}" datai18n="composure-u">COMPOSURE<span>(Cmps%)</span></span></button>
                        </div>
                        <div class="skill-box">
                            <button class="btn ui-draggable" type="roll" name="roll_dodge" value="&{template:ou} {{name=@{character_name}}} {{roll_name=Climb}} {{result=[[floor((abs(1d100cs<[[@{perception} + @{willpower_b}]]cf>[[@{perception} + @{willpower_b}+1]]-[[@{perception} + @{willpower_b}]]))/10)]]}}" datai18n="dodge-u">DODGE<span>(Do%)</span></button>
                        </div>
                   
                    </div>
                    <div class="sheet-col">
                        Col2
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="sheet-col">
    </div>
</div>

<rolltemplate class="sheet-rolltemplate-ou">
    <table>
        <tr><th>{{name}} rolls{{#roll_name}} {{roll_name}}{{/roll_name}}</th></tr>
        <tr>
            <td class="result">{{#rollWasCrit() result}}
            {{result}} degrees of Success
            {{/rollWasCrit() result}}
            {{#rollWasFumble() result}}
            {{result}} degrees of Failure
            {{/rollWasFumble() result}}
            </td>        
        </tr>
    </table>
</rolltemplate>




<!-- WORKERS -->
<script type="text/worker">
 //load sheet
on("sheet:opened", function(eventinfo) {
        console.log("Outbreak: Undead Character Sheet v0.1 loaded.");
    });
on("change:strength", function() {
        update_attr("strength");
    });
on("change:perception", function() {
        update_attr("perception");
    });
on("change:empathy", function() {
        update_attr("empathy");
    });
on("change:willpower", function() {
        update_attr("willpower");
    });
    var update_attr = function(attr) {
        var update = {};
        getAttrs([attr],function(v) {
            var bonus = Math.floor(v[attr]/10);
           update[attr+"_b"] = bonus.toString();
           setAttrs(update);
        });
    };
</script>
